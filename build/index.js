(()=>{"use strict";const t=window.wp.richText,e=window.wp.blockEditor,i=window.wp.i18n,a=window.wp.element,n=window.wp.components,o=window.ReactJSXRuntime;(0,t.registerFormatType)("fw/inline-quote",{title:(0,i.__)("Inline Quote","semantic-text-formats"),tagName:"q",className:null,edit:({isActive:a,value:n,onChange:s})=>(0,o.jsx)(e.RichTextToolbarButton,{icon:"format-quote",title:(0,i.__)("Inline Quote","semantic-text-formats"),onClick:()=>{s((0,t.toggleFormat)(n,{type:"fw/inline-quote"}))},isActive:a})}),(0,t.registerFormatType)("fw/citation",{title:(0,i.__)("Cite","semantic-text-formats"),tagName:"cite",className:null,edit:({isActive:a,value:n,onChange:s})=>(0,o.jsx)(e.RichTextToolbarButton,{icon:"media-document",title:(0,i.__)("Cite","semantic-text-formats"),onClick:()=>{s((0,t.toggleFormat)(n,{type:"fw/citation"}))},isActive:a})}),(0,t.registerFormatType)("fw/span",{title:(0,i.__)("Span","semantic-text-formats"),tagName:"span",className:null,edit:({isActive:a,value:n,onChange:s})=>(0,o.jsx)(e.RichTextToolbarButton,{icon:"text",title:(0,i.__)("Span","semantic-text-formats"),onClick:()=>{s((0,t.toggleFormat)(n,{type:"fw/span"}))},isActive:a})}),(0,t.registerFormatType)("fw/definition",{title:(0,i.__)("Definition","semantic-text-formats"),tagName:"dfn",className:null,edit:({isActive:a,value:n,onChange:s})=>(0,o.jsx)(e.RichTextToolbarButton,{icon:"book",title:(0,i.__)("Definition","semantic-text-formats"),onClick:()=>{s((0,t.toggleFormat)(n,{type:"fw/definition"}))},isActive:a})}),(0,t.registerFormatType)("fw/abbreviation",{title:(0,i.__)("Abbreviation","semantic-text-formats"),tagName:"abbr",className:null,attributes:{title:"title"},edit({isActive:s,value:r,onChange:l,contentRef:c}){const[m,f]=(0,a.useState)(!1),[u,x]=(0,a.useState)("");(0,a.useEffect)(()=>{if(s){const e=(0,t.getActiveFormat)(r,"fw/abbreviation");e&&e.attributes&&e.attributes.title&&x(e.attributes.title)}},[s,r]);const p=()=>{u&&u.trim()&&l((0,t.toggleFormat)(r,{type:"fw/abbreviation",attributes:{title:u.trim()}})),x(""),f(!1)};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.RichTextToolbarButton,{icon:"info",title:(0,i.__)("Abbreviation","semantic-text-formats"),onClick:()=>{if(s){const e=(0,t.getActiveFormat)(r,"fw/abbreviation");e&&e.attributes&&e.attributes.title&&x(e.attributes.title),f(!0)}else x(""),f(!0)},isActive:s}),m&&(0,o.jsx)(n.Popover,{anchor:c?.current,placement:"bottom",onClose:()=>{f(!1),x("")},className:"abbr-popover",children:(0,o.jsxs)("div",{style:{padding:"16px",minWidth:"280px"},children:[(0,o.jsx)(n.TextControl,{label:(0,i.__)("Full form of abbreviation:","semantic-text-formats"),value:u,onChange:x,placeholder:(0,i.__)("e.g., HyperText Markup Language","semantic-text-formats"),onKeyDown:t=>{"Enter"===t.key&&(t.preventDefault(),p())}}),(0,o.jsxs)("div",{style:{display:"flex",gap:"8px",marginTop:"12px",justifyContent:"space-between"},children:[(0,o.jsx)("div",{children:s&&(0,o.jsx)(n.Button,{variant:"tertiary",isDestructive:!0,onClick:()=>{l((0,t.toggleFormat)(r,{type:"fw/abbreviation"})),x(""),f(!1)},children:(0,i.__)("Remove","semantic-text-formats")})}),(0,o.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,o.jsx)(n.Button,{variant:"tertiary",onClick:()=>{f(!1),x("")},children:(0,i.__)("Cancel","semantic-text-formats")}),(0,o.jsx)(n.Button,{variant:"primary",onClick:p,disabled:!u||!u.trim(),children:(0,i.__)("Apply","semantic-text-formats")})]})]})]})})]})}})})();